# MariaDBの初期設定

## 文字コード設定

### 現在の文字コード設定を確認
#### $ sudo mysql -u root -e "show variables like 'char%';"

※ 「utf8mb4」の設定が存在しない。

+--------------------------+------------------------------+  
| Variable_name            | Value                        |  
+--------------------------+------------------------------+  
| character_set_client     | utf8                         |  
| character_set_connection | utf8                         |  
| character_set_database   | latin1                       |  
| character_set_filesystem | binary                       |  
| character_set_results    | utf8                         |  
| character_set_server     | latin1                       |  
| character_set_system     | utf8                         |  
| character_sets_dir       | /usr/share/mariadb/charsets/ |  
+--------------------------+------------------------------+  

# DBのutf8mb4対応確認
$ sudo mysql -u root -e "show charset like '%utf8mb4%';"
→「utf8mb4」の情報が一行出力されればOK。

# DBクライアント側の文字コード変更
$ sudo vim /etc/my.cnf.d/mysql-clients.cnf
→「[mysql]」ブロックに「default-character-set=utf8mb4」を追記する。

# DBクライアント側の文字コードの設定反映確認
$ sudo mysql -u root -e "show variables like 'char%';"
→表示される結果の「character_set_client」「character_set_connection」「character_set_results」が「utf8mb4」となっている。

# DBサーバー側の文字コード変更
$ sudo vim /etc/my.cnf.d/mariadb-server.cnf
→「[mysqld]」ブロックの最後に「character-set-server=utf8mb4」を追記する。

# DBサーバーの再起動
$ sudo systemctl restart mariadb
$ systemctl status mariadb
→MariaDBの状態が「active」となっている。

# DBクライアント側の文字コードの設定反映確認
$ sudo mysql -u root -e "show variables like 'char%';"
→表示される結果の「character_set_server」が「utf8mb4」となっている。