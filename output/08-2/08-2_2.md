# ブログ投稿一覧の表示

## ワイヤーフレーム作成



## ブログ投稿一覧画面用Viewファイル作成

### 「blog/resources/views」配下にpostsフォルダを作成し、その中にindex.blade.phpファイルを作成して下記を記述

    <!DOCTYPE html>
    <html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
        <head>
            <meta charset="utf-8">
            <title>Blog</title>
            <!-- Fonts -->
            <link href="https://fonts.googleapis.com/css?family=Nunito:200,600" rel="stylesheet">
        </head>
        <body>
            <h1>Blog Name</h1>
            <div class='posts'>
                <div class='post'>
                    <h2 class='title'>Title</h2>
                    <p class='body'>This is a sample body.</p>
                </div>
            </div>
        </body>
    </html>

### 「blog/routes」配下にあるweb.phpに下記を追記し、Bladeファイルを直接表示するためのルーティングを一時的に設定
※ 他のRoute::getは一旦コメントアウトしておく。

    Route::get('/', function() {
        return view('posts.index');
    });

### アプリを起動して、index.blade.phpの内容が反映されていることを確認
#### $ php artisan serve --port=8080

## Viewファイルへのデータ埋め込み

### ルーティング設定（web.php）を以下のように変更する。
※ Controllerでデータを取得し、Controllerからデータを受け渡す形でViewを呼び出す。

    use Illuminate\Support\Facades\Route;
    use App\Http\Controllers\PostController;      //追加
    /*
    |--------------------------------------------------------------------------
    | Web Routes
    |--------------------------------------------------------------------------
    |
    | Here is where you can register web routes for your application. These
    | routes are loaded by the RouteServiceProvider within a group which
    | contains the "web" middleware group. Now create something great!
    |
    */
    Route::get('/', [PostController::class, 'index']);

### PostController.phpを以下のように変更する。

    <?php

    namespace App\Http\Controllers;

    use App\Models\Post;
    use Illuminate\Http\Request;

    class PostController extends Controller
    {
        public function index(Post $post)
        {
            return view('posts.index')->with(['posts' => $post->get()]);  
        //blade内で使う変数'posts'と設定。'posts'の中身にgetを使い、インスタンス化した$postを代入。
        }
    }
    ?>